# Maintainer: hiddeninthesand <hiddeninthesand at pm dot me>

# Contributor: Hunter Wittenborn <hunter@hunterwittenborn.com>

pkgname='code-bin'
pkgver='1.74.1'
pkgrel='1'
pkgdesc="Code editing. Redefined."
arch=('x86_64')
depends=('libnss3>=2:3.26' 'gnupg' 'apt' 'libxkbfile1' 'libsecret-1-0' 'libgtk-3-0>=3.10.0' 'libxss1' 'libgbm1')
provides=('visual-studio-code')
_base_url='code.visualstudio.com'
url="https://${_base_url}"

source=("code-${pkgver}.deb::https://update.${_base_url}/${pkgver}/linux-deb-x64/stable")
b2sums=('92fd6eeb7d5b1b2bdb43b9948cf9297426624a615f4ecbf0463911d216f0cc49d40b4086ea37fde29c40012c3780546c2d42792b4e5d8fb4bb26a86070e1194a')

package() {
  msg2 "Extracting data.tar.xz..."
  tar -xf data.tar.xz -C "${pkgdir}"

  msg2 "Setting up symlink to /usr/bin/code..."
  mkdir -p "${pkgdir}/usr/bin/"
  ln -s "/usr/share/code/bin/code" "${pkgdir}/usr/bin/code"
}
