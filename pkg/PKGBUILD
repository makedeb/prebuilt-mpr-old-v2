# Maintainer: Hunter Wittenborn <hunter@hunterwittenborn.com>
pkgname=celeste
pkgver=0.1.4
pkgrel=1
pkgdesc='GUI file synchronization client that can sync with any cloud provider'
arch=('any')
depends=(
    'libadwaita-1-0'
    'rclone'
)
makedepends=(
    'libadwaita-1-dev'
    'libcairo2-dev'
    'libclang-15-dev'
    'libgdk-pixbuf-2.0-dev'
    'libglib2.0-dev'
    'libgraphene-1.0-dev'
    'libgtk-4-dev'
    'libpango1.0-dev'
    'golang-go>=2:1.17'
    'pkg-config'
    'rustup'
)
license=('GPL-3.0')
url='https://github.com/hwittenborn/celeste'

source=("${url}/archive/refs/tags/v${pkgver}.tar.gz")
sha256sums=('SKIP')

build() {
    cd "${pkgname}-${pkgver}/"
    cargo build --release
}

package() {
    cd "${pkgname}-${pkgver}/"
    install -Dm 755 "target/release/${pkgname}" "${pkgdir}/usr/bin/${pkgname}"
    install -Dm 644 assets/com.hunterwittenborn.Celeste.desktop "${pkgdir}/usr/share/applications/com.hunterwittenborn.Celeste.desktop"
    install -Dm 644 assets/com.hunterwittenborn.Celeste-regular.svg "${pkgdir}/usr/share/icons/hicolor/scalable/apps/com.hunterwittenborn.Celeste.svg"
}

# vim: set sw=4 expandtab: