# Maintainer: Rafael "Auyer" Passos <auyer@rcpassos.me>
pkgname=firefox-developer-edition
pkgver=97.0b8
pkgrel=1
pkgdesc="Firefox Developer Edition"
arch=('x86_64')
depends=('lsb-release' 'libatk1.0-0' 'libc6' 'libcairo-gobject2' 'libcairo2' 'libdbus-1-3' 'libdbus-glib-1-2' 'libfontconfig1' 'libfreetype6' 'libgcc-s1' 'libgdk-pixbuf-2.0-0' 'libglib2.0-0' 'libgtk-3-0' 'libharfbuzz0b' 'libpango-1.0-0' 'libpangocairo-1.0-0' 'libpangoft2-1.0-0' 'libstdc++6' 'libx11-6' 'libx11-xcb1' 'libxcb-shm0' 'libxcb1' 'libxcomposite1' 'libxcursor1' 'libxdamage1' 'libxext6' 'libxfixes3' 'libxi6' 'libxrender1' 'libxt6')
license=('MPL 2.0')
url="https://www.mozilla.org/en-US/firefox/developer/"

source=(
	"${pkgname}-${pkgver}-x86_64.tar.bz2::https://download-installer.cdn.mozilla.net/pub/devedition/releases/${pkgver}/linux-x86_64/en-US/firefox-${pkgver}.tar.bz2"
	"firefox-developer.desktop")

sha256sums=('948f52a1cd6f54cded00fa8ce1db80a6f6df4033f8654950babd8e22950125c2'
            'eee596b22c04ee4310464ac2368659dbdd8e73fc63baf1ab147afb159314fa0f')

package() {

	# Create necessary folders in fakeroot
	mkdir -p "${pkgdir}"/opt/firefox-developer/ "${pkgdir}"/usr/bin/ "${pkgdir}"/usr/share/applications/

	# move downloaded contents into desired folder
	mv "${srcdir}"/firefox  "${pkgdir}"/opt/firefox-developer/

	# link binary
	ln -sf "${pkgdir}"/opt/firefox-developer/firefox/firefox "${pkgdir}"/usr/bin/firefox-developer
	
	# copy desktop entry
	mv "${srcdir}"/firefox-developer.desktop "${pkgdir}"/usr/share/applications/firefox-developer.desktop
}
