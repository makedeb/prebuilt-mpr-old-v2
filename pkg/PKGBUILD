# Maintainer: Mahor1221 <mahor1221 at pm dot me>

pkgname=tachidesk-server
pkgver=0.6.3
pkgrel=1
__PkgName=Tachidesk-Server
__revnum=1087
pkgdesc='A free and open source manga reader that runs extensions built for Tachiyomi'
arch=('any')
url="https://github.com/Suwayomi/$__PkgName"
license=('MPL2')
depends=('java-runtime>=8')
optdepends=('electron: running in Electron')
provides=("$pkgname")
__jar=$__PkgName-v$pkgver-r$__revnum.jar
source=("$url/releases/download/v$pkgver/$__jar"
        "$pkgname.desktop"
        "$pkgname.png"
        "$pkgname-browser-launcher.sh"
        "$pkgname-debug-launcher.sh"
        "$pkgname-electron-launcher-debian.sh")
sha256sums=('aece7cebf31c977197e762304d5182b2a18111140da3dffa9a12311893ac2ce4'
            '7ec4e0722d0312384672ccd01d939cce0fe356cf16d23f3473e7502cdddbccd3'
            '7528715b5b8d8360a9fd7dc096b51fd52bf3da671167e224b6cb637437fc4831'
            '1a075de252d4d1e4a025e26d379985995893e03d2ac9182ab8a48624b7076470'
            '39636e9a235e129312cbea43ffdaa3739fa24737e1d6b3388b354d0219272f8b'
            '649772bbc24b8e828bbec14ed648f58874b9dbfad1d6640ebb2f7fb6c55de46b')
noextract=("$__jar")

package() {
    install -Dm644 "$srcdir/$__jar" "$pkgdir/usr/share/java/$pkgname/$pkgname.jar"
    install -Dm644 "$srcdir/$pkgname.desktop" -t "$pkgdir/usr/share/applications/"
    install -Dm644 "$srcdir/$pkgname.png" -t "$pkgdir/usr/share/pixmaps/"
    install -Dm755 "$srcdir/$pkgname-browser-launcher.sh" "$pkgdir/usr/bin/$pkgname-browser"
    install -Dm755 "$srcdir/$pkgname-debug-launcher.sh" "$pkgdir/usr/bin/$pkgname-debug"
    install -Dm755 "$srcdir/$pkgname-electron-launcher-debian.sh" "$pkgdir/usr/bin/$pkgname-electron"
}
