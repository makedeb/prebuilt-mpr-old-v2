# Maintainer: hiddeninthesand <hiddeninthesand at pm dot me>

# Contributor: Hunter Wittenborn <hunter@hunterwittenborn.com>

pkgname='code-bin'
pkgver='1.73.1'
pkgrel='1'
pkgdesc="Code editing. Redefined."
arch=('x86_64')
depends=('libnss3>=2:3.26' 'gnupg' 'apt' 'libxkbfile1' 'libsecret-1-0' 'libgtk-3-0>=3.10.0' 'libxss1' 'libgbm1')
provides=('visual-studio-code')
_base_url='code.visualstudio.com'
url="https://${_base_url}"

source=("code-${pkgver}.deb::https://update.${_base_url}/${pkgver}/linux-deb-x64/stable")
b2sums=('68b4ed1eb2c9e20399daa770ffaebf70a96e50c8ccebe46d6def16ffae0763b6e0fc2fdd483389dcd67590fa3704903c09e1e599b871461dfd8dc21ea934dc81')

package() {
  msg2 "Extracting data.tar.xz..."
  tar -xf data.tar.xz -C "${pkgdir}"

  msg2 "Setting up symlink to /usr/bin/code..."
  mkdir -p "${pkgdir}/usr/bin/"
  ln -s "/usr/share/code/bin/code" "${pkgdir}/usr/bin/code"
}
