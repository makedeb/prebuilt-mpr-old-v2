# Maintainer: hiddeninthesand <hiddeninthesand at pm dot me>

# Contributor: Hunter Wittenborn <hunter@hunterwittenborn.com>

pkgname='code-bin'
pkgver='1.71.2'
pkgrel='1'
pkgdesc="Code editing. Redefined."
arch=('x86_64')
depends=('libnss3>=2:3.26' 'gnupg' 'apt' 'libxkbfile1' 'libsecret-1-0' 'libgtk-3-0>=3.10.0' 'libxss1' 'libgbm1')
provides=('visual-studio-code')
_base_url='code.visualstudio.com'
url="https://${_base_url}"

source=("code-${pkgver}.deb::https://update.${_base_url}/${pkgver}/linux-deb-x64/stable")
b2sums=('d26eba099dc51a7dd02f5637f4c76a4d95dbf2a4b6fbc1b23fdcaac7cb4ff90b04a128af590686822a14a841bedf1c95bcd8d7a5e350cba632b8d7d90d82a03d')

package() {
  msg2 "Extracting data.tar.xz..."
  tar -xf data.tar.xz -C "${pkgdir}"

  msg2 "Setting up symlink to /usr/bin/code..."
  mkdir -p "${pkgdir}/usr/bin/"
  ln -s "/usr/share/code/bin/code" "${pkgdir}/usr/bin/code"
}
