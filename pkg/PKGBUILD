# Maintainer: only_vip <onlyme_vip@protonmail.com>
pkgname=rxvt-unicode-256color-unicode3
_pkgname=rxvt-unicode
pkgver=9.30
pkgrel=2
pkgdesc="Unicode enabled rxvt-clone terminal emulator (urxvt) with 256 color and unicode3 enabled"
arch=('amd64')
url="http://software.schmorp.de/pkg/rxvt-unicode.html"
license=('GPL')
makedepends=('libxft-dev' 'perl' 'libstartup-notification0-dev' 'libstartup-notification0' 'libxmu-dev' 'libperl-dev')
depends=('libxft2' 'perl' 'libstartup-notification0' 'libptytty-bin') 
bullseye_depends=(${depends[@]} 'libnsl-dev' 'libnsl2' 'terminfo')
hirsute_depends=(${depends[@]} 'libnsl-dev' 'libnsl2' 'terminfo')
optdepends=('libgtk3-perl: to use the urxvt-tabbed')
source=(http://dist.schmorp.de/rxvt-unicode/${_pkgname}-${pkgver}.tar.bz2)
provides=('rxvt-unicode' )
conflicts=('rxvt-unicode' 'rxvt-unicode-256color')
# replaces=('rxvt-unicode' 'rxvt-unicode-256color')
sha512sums=('048d5f635a61bc1a739d5cbc09e7a9f77cee18c81df468ce1ff0a62866ced06fc4ec258bb015d2484a7e7bad2339f0bdd79bd824d649c2553a80bdef9f199e99')
build() {
  cd "${srcdir}/${_pkgname}-${pkgver}"
  ./configure  --prefix=/usr --enable-everything --enable-smart-resize --enable-256-color --enable-unicode3
    #--enable-256-color \
    #--enable-combining \
    #--enable-fading \
    #--enable-font-styles \
    #--enable-iso14755 \
    #--enable-keepscrolling \
    #--enable-lastlog \
    #--enable-mousewheel \
    #--enable-next-scroll \
    #--disable-perl \
    #--enable-pointer-blank \
    #--enable-rxvt-scroll \
    #--enable-selectionscrolling \
    #--enable-slipwheeling \
    #--disable-smart-resize \
    #--enable-startup-notification \
    #--enable-transparency \
    #--enable-unicode3 \
    #--enable-utmp \
    #--enable-wtmp \
    #--enable-xft \
    #--enable-xim \
    #--enable-xterm-scroll \
    #--disable-pixbuf \
    #--disable-frills
  make
  #tic -x "${srcdir}/${_pkgname}-${pkgver}/doc/etc/rxvt-unicode.terminfo"
}

package() {
  #install freedesktop menu
  cd ..
  for _f in urxvt urxvtc ; do
   install -Dm644 ${_f}.desktop "${pkgdir}/usr/share/applications/${_f}.desktop"
  done


  #workaround terminfo installation
  cd ${srcdir}/${_pkgname}-${pkgver}
  make DESTDIR="${pkgdir}" TERMINFO="/tmp" install
}
